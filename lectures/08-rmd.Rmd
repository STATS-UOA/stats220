---
title: "STATS 220"
subtitle: "R Markdown`r emo::ji('knit')`"
type: "lecture"
date: ""
output:
  xaringan::moon_reader:
    css: ["assets/remark.css"]
    lib_dir: libs
    nature:
      ratio: 16:9
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: false
---

class: inverse middle center

```{r initial, echo = FALSE, cache = FALSE, results = 'hide'}
library(knitr)
options(htmltools.dir.version = FALSE, htmltools.preserve.raw = FALSE, 
  tibble.width = 60, tibble.print_min = 6)
opts_chunk$set(
  echo = TRUE, warning = FALSE, message = FALSE, comment = "#>",
  fig.path = 'figure/', cache.path = 'cache/', cache = FALSE, fig.retina = 3,
  fig.align = 'center', fig.width = 4.5, fig.height = 4, fig.show = 'hold',
  dpi = 120
)
```

```{r xaringan-panelset, echo = FALSE}
xaringanExtra::use_panelset()
```

# .large[.large[.large[<i class="fab fa-r-project"></i>]]] + .large[.large[.large[<i class="fab fa-markdown"></i>]]]

---

## Markdown <i class="fab fa-markdown"></i> `.md`

* Created by [John Gruber](https://daringfireball.net/projects/markdown/) & [Aaron Swartz](http://www.aaronsw.com) in 2004
* A lightweight .brown[markup language] to add formatting elements to plain-text documents, contrasting to WYSIWYG
* Portable, platform independent, everywhere (e.g. Piazza, but not Canvas `r emo::ji("angry")`)

<img src="img/piazza-md.png" width="100%">

???

* aaron, reddit
* The course website: write in md, and render in html by hugo
* commonmark: it's one of markdown flavours, e.g. github

---

## <i class="fab fa-markdown"></i> Basic syntax

---

.pull-left[
## R Markdown `.Rmd`
* how to create an Rmd
]
.pull-right[
````markdow
---
title: "STATS220 R Markdown demo"
author: "Earo Wang"
date: "``r 'r'` lubridate::today()`"
output: html_document
---

```{r setup, include = FALSE}`r ''`
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

You can embed an R code chunk like this:

```{r mpg, message = FALSE}`r ''`
library(tidyverse)
mpg
```

See <http://rmarkdown.rstudio.com>.
````
]

---

.pull-left[
## YAML header
* one markdown file, many formats
* {tinytex} for pdf
]
.pull-right[
````markdow
*---
*title: "STATS220 R Markdown demo"
*author: "Earo Wang"
*date: "``r 'r'` lubridate::today()`"
*output: html_document
*---

```{r setup, include = FALSE}`r ''`
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

You can embed an R code chunk like this:

```{r mpg, message = FALSE}`r ''`
library(tidyverse)
mpg
```

See <http://rmarkdown.rstudio.com>.
````
]

---

.pull-left[
## R chunk for global setting
]
.pull-right[
````markdow
---
title: "STATS220 R Markdown demo"
author: "Earo Wang"
date: "``r 'r'` lubridate::today()`"
output: html_document
---

*```{r setup, include = FALSE}`r ''`
*knitr::opts_chunk$set(echo = TRUE)
*```

## R Markdown

You can embed an R code chunk like this:

```{r mpg, message = FALSE}`r ''`
library(tidyverse)
mpg
```

See <http://rmarkdown.rstudio.com>.
````
]

---

.pull-left[
## Write in markdown
]
.pull-right[
````markdow
---
title: "STATS220 R Markdown demo"
author: "Earo Wang"
date: "``r 'r'` lubridate::today()`"
output: html_document
---

```{r setup, include = FALSE}`r ''`
knitr::opts_chunk$set(echo = TRUE)
```

*## R Markdown

*You can embed an R code chunk like this:

```{r mpg, message = FALSE}`r ''`
library(tidyverse)
mpg
```

*See <http://rmarkdown.rstudio.com>.
````
]

---

.pull-left[
## R chunk
]
.pull-right[
````markdow
---
title: "STATS220 R Markdown demo"
author: "Earo Wang"
date: "``r 'r'` lubridate::today()`"
output: html_document
---

```{r setup, include = FALSE}`r ''`
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown

You can embed an R code chunk like this:

*```{r mpg, message = FALSE}`r ''`
*library(tidyverse)
*mpg
*```

See <http://rmarkdown.rstudio.com>.
````
]

---

.pull-left[
## Render
]
.pull-right[
<br>
<img src="img/demo-rmd-render.png" width="100%">
]

---

````r
```{r scatterplot, fig.align = "center", fig.width = 4.5, fig.height = 4}`r ''`
ggplot(mpg, aes(displ, cty)) +
  geom_point()
```
````

.pull-left[
## Chunk options

* `scatterplot` gives the chunk a name.
* `fig.align`: alignment of figures
* `fig.width`/`fig.height`
* [other figure options](https://yihui.org/knitr/options/#plots)
]
.pull-right[
<img src="https://itsalocke.com/blog/img/namer-oh-no.png" width="100%">
<img src="https://itsalocke.com/blog/img/namer-yaaasss.png" width="100%">
.footnote[image credit: Maelle Salmon]
]

---

````r
```{r biglm, echo = FALSE, cache = TRUE}`r ''`
ggplot(mpg, aes(displ, cty)) +
  geom_point()
```
````

.pull-left[
## Chunk options

* `scatterplot` gives the chunk a name.
* `fig.align`: alignment of figures
* `fig.width`/`fig.height`
* [other figure options](https://yihui.org/knitr/options/#plots)
]
.pull-right[
]

---

## Beyond <i class="fab fa-r-project"></i>: language engines

````py
*```{python hello}`r ''`
# remotes::install_github("rstudio/reticulate")
x = "hello, python world!"
print(x.split(" "))
```
````

```{python hello, echo = FALSE}
x = "hello, python world!"
print(x.split(" "))
```

<hr>

````sh
*```{sh head}`r ''`
head -4 data/pisa/pisa-student.csv
```
````

```{sh pisa-header, echo = FALSE}
head -4 data/pisa/pisa-student.csv
```

---

## Beyond <i class="fab fa-r-project"></i>: language engines

````r
```{r db}`r ''`
library(RSQLite)
db <- dbConnect(SQLite(), dbname = "data/pisa/pisa-student.db")
```

*```{sql query, connection = db, output.var = "pisa18"}`r ''`
SELECT * FROM pisa WHERE year = 2018
```
````


```{r db, echo = FALSE}
library(RSQLite)
db <- dbConnect(SQLite(), dbname = "data/pisa/pisa-student.db")
```

```{sql sql, connection = db, echo = FALSE, output.var = "pisa18"}
SELECT * FROM pisa WHERE year = 2018
```

```{r r-pisa, echo = FALSE}
tibble::as_tibble(pisa18)
```

---

## Reading

.pull-left[
.center[[<img src="https://d33wubrfki0l68.cloudfront.net/b88ef926a004b0fce72b2526b0b5c4413666a4cb/24a30/cover.png" height="520px">](https://r4ds.had.co.nz)]
]
.pull-right[
* [R Markdown](https://r4ds.had.co.nz/r-markdown.html)
]
